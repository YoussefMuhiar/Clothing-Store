<!--
Project: Clothing Store Website (separate files)
Files included below. Save each section to its own file using the filename header lines.

Files:
- index.html
- catalog.html
- product.html
- cart.html
- about.html
- contact.html
- styles.css
- scripts.js
- products-data.js
- assets/ (images referenced via Unsplash placeholders)
-->

--- index.html ---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Arcadian Threads — Modern Apparel</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Arcadian <span>Threads</span></a>
      <nav class="nav">
        <a href="catalog.html">Catalog</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="cart.html" class="cart-link">Cart (<span id="cart-count">0</span>)</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-grid">
        <div class="hero-text">
          <h1>Timeless pieces. Modern fit.</h1>
          <p>Designed for movement, built to last — seasonal drops and wardrobe staples.</p>
          <div class="hero-cta">
            <a class="btn btn-primary" href="catalog.html">Shop New Arrivals</a>
            <a class="btn btn-ghost" href="about.html">Our Story</a>
          </div>
        </div>
        <div class="hero-visual" aria-hidden>
          <img src="https://images.unsplash.com/photo-1520975698511-2f2a7a3b0b9f?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=5c3d1a02c6f0c1a1b8c9f7f8f2d3b1d2" alt="Clothing showcase" loading="lazy">
        </div>
      </div>
    </section>

    <section class="featured container">
      <h2>Featured Picks</h2>
      <div id="featured-grid" class="product-grid"></div>
    </section>

    <section class="values container">
      <div class="values-cards">
        <article>
          <svg viewBox="0 0 24 24" class="icon"><path d="M12 2L2 7l10 5 10-5-10-5z"></path></svg>
          <h3>Quality Fabrics</h3>
          <p>Thoughtfully sourced materials with long-lasting construction.</p>
        </article>
        <article>
          <svg viewBox="0 0 24 24" class="icon"><path d="M12 22s8-4 8-10V6l-8 4-8-4v6c0 6 8 10 8 10z"></path></svg>
          <h3>Sustainable</h3>
          <p>Reduced waste, ethical partners, and recyclable packaging.</p>
        </article>
        <article>
          <svg viewBox="0 0 24 24" class="icon"><path d="M12 17a2 2 0 100-4 2 2 0 000 4z"></path></svg>
          <h3>Free Exchanges</h3>
          <p>Easy returns and free exchanges within 30 days.</p>
        </article>
      </div>
    </section>

  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <strong>Arcadian Threads</strong>
        <p>Minimal apparel built for everyday life.</p>
      </div>
      <nav class="footer-nav">
        <a href="catalog.html">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
    <div class="legal">© <span id="year"></span> Arcadian Threads — All rights reserved.</div>
  </footer>

  <script src="products-data.js"></script>
  <script src="scripts.js"></script>
</body>
</html>

--- catalog.html ---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Catalog — Arcadian Threads</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Arcadian <span>Threads</span></a>
      <nav class="nav">
        <a href="catalog.html">Catalog</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="cart.html" class="cart-link">Cart (<span id="cart-count-2">0</span>)</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="catalog-header">
      <h1>Catalog</h1>
      <div class="catalog-tools">
        <input id="search" placeholder="Search products..." aria-label="Search products">
        <select id="filter-category">
          <option value="all">All categories</option>
          <option value="tops">Tops</option>
          <option value="bottoms">Bottoms</option>
          <option value="outerwear">Outerwear</option>
          <option value="accessories">Accessories</option>
        </select>
        <select id="sort">
          <option value="featured">Featured</option>
          <option value="price-asc">Price — low to high</option>
          <option value="price-desc">Price — high to low</option>
          <option value="newest">Newest</option>
        </select>
      </div>
    </div>

    <div id="catalog-grid" class="product-grid"></div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <strong>Arcadian Threads</strong>
        <p>Minimal apparel built for everyday life.</p>
      </div>
      <nav class="footer-nav">
        <a href="catalog.html">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
    <div class="legal">© <span id="year2"></span> Arcadian Threads — All rights reserved.</div>
  </footer>

  <script src="products-data.js"></script>
  <script src="scripts.js"></script>
</body>
</html>

--- product.html ---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Product — Arcadian Threads</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Arcadian <span>Threads</span></a>
      <nav class="nav">
        <a href="catalog.html">Catalog</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="cart.html" class="cart-link">Cart (<span id="cart-count-3">0</span>)</a>
      </nav>
    </div>
  </header>

  <main class="container product-page">
    <a href="catalog.html" class="back-link">← Back to catalog</a>
    <div class="product-detail">
      <div class="product-images">
        <img id="product-main-image" src="" alt="">
      </div>
      <div class="product-info">
        <h1 id="product-title"></h1>
        <p id="product-price" class="price"></p>
        <p id="product-desc"></p>
        <div class="product-form">
          <label>Size
            <select id="product-size">
              <option>S</option>
              <option>M</option>
              <option>L</option>
              <option>XL</option>
            </select>
          </label>
          <label>Qty
            <input id="product-qty" type="number" min="1" value="1">
          </label>
          <button id="add-to-cart" class="btn btn-primary">Add to Cart</button>
        </div>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <strong>Arcadian Threads</strong>
        <p>Minimal apparel built for everyday life.</p>
      </div>
      <nav class="footer-nav">
        <a href="catalog.html">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
    <div class="legal">© <span id="year3"></span> Arcadian Threads — All rights reserved.</div>
  </footer>

  <script src="products-data.js"></script>
  <script src="scripts.js"></script>
</body>
</html>

--- cart.html ---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cart — Arcadian Threads</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Arcadian <span>Threads</span></a>
      <nav class="nav">
        <a href="catalog.html">Catalog</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="cart.html" class="cart-link">Cart (<span id="cart-count-4">0</span>)</a>
      </nav>
    </div>
  </header>

  <main class="container cart-page">
    <h1>Your Cart</h1>
    <div id="cart-items"></div>
    <div class="cart-summary">
      <div>
        <p>Subtotal: <strong id="subtotal">$0.00</strong></p>
        <p>Shipping: <strong id="shipping">$5.00</strong></p>
        <p>Total: <strong id="total">$0.00</strong></p>
      </div>
      <div class="checkout-actions">
        <a href="catalog.html" class="btn btn-ghost">Continue Shopping</a>
        <button id="proceed-checkout" class="btn btn-primary">Proceed to Checkout</button>
      </div>
    </div>

    <div id="checkout-form" class="checkout-form hidden">
      <h2>Checkout</h2>
      <form id="checkout" autocomplete="on">
        <div class="grid-2">
          <label>Full name<input name="name" required></label>
          <label>Email<input name="email" type="email" required></label>
        </div>
        <label>Address<input name="address" required></label>
        <div class="grid-2">
          <label>City<input name="city" required></label>
          <label>Postal code<input name="postal" required></label>
        </div>
        <label>Card number<input name="card" inputmode="numeric" required></label>
        <div class="grid-2">
          <label>Expiry<input name="expiry" required></label>
          <label>CVC<input name="cvc" required></label>
        </div>
        <button type="submit" class="btn btn-primary">Place Order</button>
      </form>
      <div id="order-success" class="order-success hidden">
        <h3>Thanks — order placed!</h3>
        <p>Your order has been recorded (this demo does not actually process payments).</p>
      </div>
    </div>

  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <strong>Arcadian Threads</strong>
        <p>Minimal apparel built for everyday life.</p>
      </div>
      <nav class="footer-nav">
        <a href="catalog.html">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
    <div class="legal">© <span id="year4"></span> Arcadian Threads — All rights reserved.</div>
  </footer>

  <script src="products-data.js"></script>
  <script src="scripts.js"></script>
</body>
</html>

--- about.html ---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>About — Arcadian Threads</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Arcadian <span>Threads</span></a>
      <nav class="nav">
        <a href="catalog.html">Catalog</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="cart.html" class="cart-link">Cart (<span id="cart-count-5">0</span>)</a>
      </nav>
    </div>
  </header>

  <main class="container about-page">
    <h1>Our Story</h1>
    <p>Arcadian Threads began as a small creative project to design simple, comfortable clothing that feels right for everyday life. We focus on durable fabrics, timeless silhouettes, and responsible production.</p>

    <section class="team">
      <h2>Meet the Team</h2>
      <div class="team-grid">
        <article>
          <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=600&auto=format&fit=crop&ixlib=rb-4.0.3&s=abcd" alt="Founder">
          <h3>Ana Rodriguez</h3>
          <p>Founder & Designer</p>
        </article>
        <article>
          <img src="https://images.unsplash.com/photo-1545996124-1d5b074f19d3?q=80&w=600&auto=format&fit=crop&ixlib=rb-4.0.3&s=efgh" alt="Operations">
          <h3>Marcus Lee</h3>
          <p>Operations & Sourcing</p>
        </article>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <strong>Arcadian Threads</strong>
        <p>Minimal apparel built for everyday life.</p>
      </div>
      <nav class="footer-nav">
        <a href="catalog.html">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
    <div class="legal">© <span id="year5"></span> Arcadian Threads — All rights reserved.</div>
  </footer>

  <script src="scripts.js"></script>
</body>
</html>

--- contact.html ---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact — Arcadian Threads</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">Arcadian <span>Threads</span></a>
      <nav class="nav">
        <a href="catalog.html">Catalog</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="cart.html" class="cart-link">Cart (<span id="cart-count-6">0</span>)</a>
      </nav>
    </div>
  </header>

  <main class="container contact-page">
    <h1>Get in touch</h1>
    <p>Questions about sizing, orders, or collaborations? Send us a message and we'll reply within 48 hours.</p>

    <form id="contact-form" class="contact-form">
      <div class="grid-2">
        <label>Name<input name="name" required></label>
        <label>Email<input name="email" type="email" required></label>
      </div>
      <label>Subject<input name="subject"></label>
      <label>Message<textarea name="message" rows="6" required></textarea></label>
      <button type="submit" class="btn btn-primary">Send message</button>
      <div id="contact-success" class="order-success hidden">Thanks — we'll be in touch soon.</div>
    </form>

    <section class="contact-meta">
      <h3>Visit</h3>
      <p>Pop-up locations & pop-up events are updated on our socials. Email: hello@arcadian.example</p>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <strong>Arcadian Threads</strong>
        <p>Minimal apparel built for everyday life.</p>
      </div>
      <nav class="footer-nav">
        <a href="catalog.html">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
    <div class="legal">© <span id="year6"></span> Arcadian Threads — All rights reserved.</div>
  </footer>

  <script src="scripts.js"></script>
</body>
</html>

--- styles.css ---
:root{
  --bg:#fafafa;
  --card:#ffffff;
  --accent:#0f172a;
  --muted:#6b7280;
  --primary:#111827;
  --brand:#1f6feb;
  --radius:12px;
  --glass: rgba(255,255,255,0.6);
}
*{box-sizing:border-box}
html,body{height:100%;font-family:Inter,system-ui,Segoe UI,Arial;color:var(--primary);background:var(--bg);margin:0}
.container{max-width:1100px;margin:0 auto;padding:28px}
.site-header{backdrop-filter:blur(4px);background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.7));border-bottom:1px solid rgba(15,23,42,0.04);position:sticky;top:0;z-index:40}
.header-inner{display:flex;align-items:center;justify-content:space-between}
.brand{font-weight:700;letter-spacing:-0.02em;color:var(--accent);text-decoration:none}
.brand span{color:var(--brand)}
.nav a{margin-left:18px;text-decoration:none;color:var(--muted)}
.hero{padding:56px 0}
.hero-grid{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:center}
.hero h1{font-size:40px;margin:0 0 12px}
.hero p{color:var(--muted);margin:0 0 20px}
.btn{display:inline-block;padding:10px 16px;border-radius:10px;text-decoration:none;border:1px solid transparent}
.btn-primary{background:var(--brand);color:white}
.btn-ghost{background:transparent;border:1px solid rgba(17,24,39,0.06);color:var(--primary)}
.hero-visual img{width:100%;border-radius:14px;object-fit:cover;box-shadow:0 8px 30px rgba(15,23,42,0.08)}
.featured h2{margin:14px 0}
.product-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px}
.card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 4px 18px rgba(15,23,42,0.06);transition:transform .18s ease,box-shadow .18s ease}
.card:hover{transform:translateY(-6px);box-shadow:0 12px 40px rgba(15,23,42,0.09)}
.card img{width:100%;height:220px;object-fit:cover;border-radius:8px}
.card h4{margin:10px 0 6px}
.card p{margin:0;color:var(--muted);font-size:14px}
.values{padding:40px 0}
.values-cards{display:flex;gap:18px}
.values-cards article{background:linear-gradient(180deg,rgba(255,255,255,0.8),var(--glass));padding:18px;border-radius:12px;flex:1}
.values .icon{width:36px;height:36px;fill:var(--brand)}
.footer-inner{display:flex;justify-content:space-between;align-items:center;padding:20px 0}
.legal{text-align:center;padding:14px 0;color:var(--muted);font-size:14px}
.container h1{margin-top:10px}
.catalog-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.catalog-tools{display:flex;gap:10px}
.catalog-tools input, .catalog-tools select{padding:8px;border-radius:8px;border:1px solid rgba(15,23,42,0.06)}
.product-page{padding:28px 0}
.product-detail{display:grid;grid-template-columns:1fr 1fr;gap:28px}
.product-images img{width:100%;border-radius:12px}
.product-info .price{font-weight:700;font-size:22px;margin:6px 0}
.product-form{display:flex;gap:12px;align-items:center;margin-top:12px}
.product-form label{display:flex;flex-direction:column}
.cart-page .cart-summary{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding:16px;background:var(--card);border-radius:12px}
.checkout-form{margin-top:24px;padding:18px;background:var(--card);border-radius:12px}
.hidden{display:none}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.team-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
.team-grid img{width:100%;height:160px;object-fit:cover;border-radius:10px}
.contact-form input, .contact-form textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06)}
.order-success{margin-top:12px;padding:12px;background:#eefbf6;border-radius:8px}
.back-link{display:inline-block;margin:8px 0;color:var(--muted)}
@media (max-width:800px){
  .hero-grid{grid-template-columns:1fr}
  .product-detail{grid-template-columns:1fr}
  .values-cards{flex-direction:column}
}

--- products-data.js ---
// Simple product dataset used by scripts.js
const PRODUCTS = [
  {id: 'p1', title: 'Everyday Tee', price: 28.00, category: 'tops', image: 'https://images.unsplash.com/photo-1520975698511-2f2a7a3b0b9f?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=5c3d1a02c6f0c1a1b8c9f7f8f2d3b1d2', featured: true, desc: 'Soft cotton tee in classic fit', created: '2025-06-12' },
  {id: 'p2', title: 'Relaxed Hoodie', price: 68.00, category: 'outerwear', image: 'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=1234', featured: true, desc: 'Cozy midweight hoodie with brushed interior', created: '2025-05-05' },
  {id: 'p3', title: 'Slim Chino', price: 52.00, category: 'bottoms', image: 'https://images.unsplash.com/photo-1534367610122-7f6a0d8e4c3d?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=2345', featured: false, desc: 'Versatile chinos in stretch cotton', created: '2025-03-14' },
  {id: 'p4', title: 'Rib Beanie', price: 18.00, category: 'accessories', image: 'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=5678', featured: false, desc: 'Knitted beanie with folded cuff', created: '2025-02-20' },
  {id: 'p5', title: 'Lightweight Jacket', price: 98.00, category: 'outerwear', image: 'https://images.unsplash.com/photo-1520975698511-2f2a7a3b0b9f?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=abcd', featured: true, desc: 'Windproof jacket with breathable lining', created: '2025-07-02' }
];

--- scripts.js ---
// Handles product listing, cart, checkout UI. Uses PRODUCTS from products-data.js
(function(){
  // Utilities
  function qs(sel, root=document) { return root.querySelector(sel) }
  function qsa(sel, root=document) { return Array.from(root.querySelectorAll(sel)) }
  function formatCurrency(n){ return '$' + n.toFixed(2) }

  // Cart stored in localStorage
  const CART_KEY = 'arc_cart_v1';
  function loadCart(){ try { return JSON.parse(localStorage.getItem(CART_KEY))||[] }catch(e){return[]} }
  function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)) }
  function cartCount(){ return loadCart().reduce((s,i)=>s+i.qty,0) }

  // Set year across pages
  const years = qsa('[id^=year]'); years.forEach(el=>el.textContent = new Date().getFullYear())

  // Update cart count in header links (multiple possible elements)
  function renderCartCount(){ qsa('#cart-count,#cart-count-2,#cart-count-3,#cart-count-4,#cart-count-5,#cart-count-6').forEach(el=>el.textContent = cartCount()) }
  renderCartCount()

  // Build product card element
  function productCard(p){
    const el = document.createElement('article'); el.className='card'
    el.innerHTML = `
      <a href="product.html?id=${encodeURIComponent(p.id)}"><img src="${p.image}" alt="${p.title}"></a>
      <h4>${p.title}</h4>
      <p class="muted">${p.desc}</p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
        <strong>${formatCurrency(p.price)}</strong>
        <button class="btn add-small" data-id="${p.id}">Add</button>
      </div>`
    return el
  }

  // Pages
  if (qs('#featured-grid')){
    // Index page: show featured
    const grid = qs('#featured-grid')
    PRODUCTS.filter(p=>p.featured).forEach(p=>grid.appendChild(productCard(p)))
  }

  if (qs('#catalog-grid')){
    const grid = qs('#catalog-grid')
    const search = qs('#search')
    const filter = qs('#filter-category')
    const sort = qs('#sort')

    function renderCatalog(){
      grid.innerHTML=''
      let list = PRODUCTS.slice()
      const s = search.value.trim().toLowerCase()
      if (s) list = list.filter(p=>p.title.toLowerCase().includes(s) || p.desc.toLowerCase().includes(s))
      const cat = filter.value
      if (cat !== 'all') list = list.filter(p=>p.category===cat)
      if (sort.value==='price-asc') list.sort((a,b)=>a.price-b.price)
      if (sort.value==='price-desc') list.sort((a,b)=>b.price-a.price)
      if (sort.value==='newest') list.sort((a,b)=> (new Date(b.created)) - (new Date(a.created)))
      list.forEach(p=>grid.appendChild(productCard(p)))
    }

    [search,filter,sort].forEach(i=>i.addEventListener('input',renderCatalog))
    renderCatalog()
  }

  // Attach add buttons (works across pages using event delegation)
  document.addEventListener('click', function(e){
    const add = e.target.closest('.add-small')
    if (add){
      const id = add.dataset.id
      addToCart(id,1)
    }
  })

  function addToCart(id, qty, meta){
    const cart = loadCart()
    const idx = cart.findIndex(i=>i.id===id && (!meta || !meta.size || i.size===meta.size))
    if (idx>-1) cart[idx].qty += qty
    else {
      const p = PRODUCTS.find(x=>x.id===id)
      cart.push({id: p.id, title: p.title, price: p.price, image: p.image, qty, size: meta && meta.size})
    }
    saveCart(cart); renderCartCount(); showAddToast()
  }

  function showAddToast(){
    // minimal toast
    const t = document.createElement('div'); t.className='toast'; t.textContent='Added to cart'
    Object.assign(t.style,{position:'fixed',right:'18px',bottom:'18px',background:'var(--brand)',color:'#fff',padding:'10px 14px',borderRadius:'10px',zIndex:9999})
    document.body.appendChild(t)
    setTimeout(()=>{t.style.opacity=0; setTimeout(()=>t.remove(),300)},1000)
  }

  // Product page
  if (qs('#product-title')){
    const params = new URLSearchParams(location.search)
    const id = params.get('id')
    const p = PRODUCTS.find(x=>x.id===id)
    if (!p){ qs('.product-detail').innerHTML='<p>Product not found.</p>'; return }
    qs('#product-title').textContent = p.title
    qs('#product-price').textContent = formatCurrency(p.price)
    qs('#product-desc').textContent = p.desc
    qs('#product-main-image').src = p.image

    qs('#add-to-cart').addEventListener('click', ()=>{
      const size = qs('#product-size').value
      const qty = Math.max(1, Number(qs('#product-qty').value||1))
      addToCart(p.id, qty, {size})
    })
  }

  // Cart page
  if (qs('#cart-items')){
    function renderCartPage(){
      const root = qs('#cart-items'); root.innerHTML=''
      const cart = loadCart()
      if (!cart.length){ root.innerHTML='<p>Your cart is empty.</p>'; qs('#subtotal').textContent = formatCurrency(0); qs('#total').textContent = formatCurrency(0); return }
      cart.forEach((it, idx)=>{
        const row = document.createElement('div'); row.className='card';
        row.style.display='flex'; row.style.gap='12px'; row.style.alignItems='center';
        row.innerHTML = `
          <img src="${it.image}" alt="${it.title}" style="width:96px;height:72px;object-fit:cover;border-radius:8px">
          <div style="flex:1">
            <strong>${it.title}</strong>
            <div style="color:var(--muted);font-size:14px">${it.size? 'Size: '+it.size : ''}</div>
            <div style="margin-top:8px">${formatCurrency(it.price)} x <input data-idx="${idx}" class="qty-input" type="number" min="1" value="${it.qty}" style="width:64px;padding:6px;border-radius:6px;border:1px solid rgba(15,23,42,0.06)"></div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:700">${formatCurrency(it.price * it.qty)}</div>
            <button data-remove="${idx}" class="btn btn-ghost" style="margin-top:8px">Remove</button>
          </div>`
        root.appendChild(row)
      })

      const subtotal = cart.reduce((s,i)=>s + i.price * i.qty,0)
      qs('#subtotal').textContent = formatCurrency(subtotal)
      const shipping = cart.length ? 5.00 : 0
      qs('#shipping').textContent = formatCurrency(shipping)
      qs('#total').textContent = formatCurrency(subtotal + shipping)
    }
    renderCartPage()

    // change qty
    document.addEventListener('input', function(e){
      if (e.target.matches('.qty-input')){
        const idx = Number(e.target.dataset.idx)
        const cart = loadCart(); cart[idx].qty = Math.max(1, Number(e.target.value)||1); saveCart(cart); renderCartPage(); renderCartCount()
      }
    })

    // remove
    document.addEventListener('click', function(e){
      const rem = e.target.closest('[data-remove]')
      if (rem){
        const i = Number(rem.dataset.remove)
        const cart = loadCart(); cart.splice(i,1); saveCart(cart); renderCartPage(); renderCartCount()
      }
    })

    // proceed to checkout toggle
    qs('#proceed-checkout').addEventListener('click', ()=>{
      qs('#checkout-form').classList.remove('hidden')
      qs('#checkout-form').scrollIntoView({behavior:'smooth'})
    })

    // checkout form
    if (qs('#checkout')){
      qs('#checkout').addEventListener('submit', function(ev){
        ev.preventDefault()
        // mock order
        localStorage.removeItem(CART_KEY)
        renderCartPage(); renderCartCount()
        qs('#checkout').classList.add('hidden')
        qs('#order-success').classList.remove('hidden')
      })
    }
  }

  // Contact form handler
  if (qs('#contact-form')){
    qs('#contact-form').addEventListener('submit', function(e){
      e.preventDefault(); qs('#contact-success').classList.remove('hidden'); qs('#contact-form').reset()
    })
  }

  // Generic: wire up "Add" on dynamically created cards (some buttons created earlier may not have listeners)
  document.addEventListener('click', function(e){
    const a = e.target.closest('button')
    if (a && a.classList.contains('add-small')){
      const id = a.dataset.id; addToCart(id,1)
    }
  })

  // ensure cart count kept up-to-date on load
  window.addEventListener('storage', renderCartCount)
})();
